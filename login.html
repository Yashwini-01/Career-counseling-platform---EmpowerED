<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Login</title>

   <!-- font awesome cdn link  -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">

   <!-- custom css file link  -->
   <link rel="stylesheet" href="css/style.css">

</head>
<body>

<header class="header">
   <section class="flex">
      <a href="home.html" class="logo">EmpowerED.</a>

      <form action="search.html" method="post" class="search-form">
         <input type="text" name="search_box" required placeholder="search courses..." maxlength="100">
         <button type="submit" class="fas fa-search"></button>
      </form>

      <div class="icons">
         <div id="menu-btn" class="fas fa-bars"></div>
         <div id="search-btn" class="fas fa-search"></div>
         <div id="user-btn" class="fas fa-user"></div>
         <div id="toggle-btn" class="fas fa-sun"></div>
      </div>
   </section>
</header>   

<div class="side-bar">
   <div id="close-btn">
      <i class="fas fa-times"></i>
   </div>
   <nav class="navbar">
   </nav>
</div>

<section class="form-container">
   <form action="" method="post" enctype="multipart/form-data">
      <h3>login now</h3>
      <p>your username <span>*</span></p>
      <input type="text" id="username" name="username" placeholder="enter your username" required maxlength="50" class="box">
      <p>your password <span>*</span></p>
      <input type="password" id="password" name="password" placeholder="enter your password" required maxlength="20" class="box">
      <a class="btn" href="home.html">Login</a>
    
      <p>Don't have an account? <a href="register.html">Sign up</a></p>
   </form>
</section>



<!-- custom js file link  -->
<script>
   const fields = ["username", "password"];
   let currentFieldIndex = 0;

   function speakText(message) {
      const utterance = new SpeechSynthesisUtterance(message);
      utterance.lang = "en-US";
      window.speechSynthesis.speak(utterance);
   }

   function startSpeechRecognition(field, isFinalStep = false) {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = "en-US";
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.start();

      recognition.onresult = (event) => {
         const spokenText = event.results[0][0].transcript.toLowerCase();
         if (isFinalStep) {
            if (spokenText.includes("yes")) {
               speakText("Logged in successfully. Redirecting to the home page.");
               setTimeout(() => {
                  window.location.href = "home.html"; // Redirect to home page
               }, 3000);
            } else {
               speakText("Login canceled. You can try again.");
            }
         } else {
            document.getElementById(field).value = spokenText;
            currentFieldIndex++;
            if (currentFieldIndex < fields.length) {
               askForNextField();
            } else {
               confirmLogin();
            }
         }
      };

     
   }

   function askForNextField() {
      const nextField = fields[currentFieldIndex];
      if (nextField) {
         const message = `Please say your ${nextField}`;
         speakText(message);
         startSpeechRecognition(nextField);
      }
   }

   function confirmLogin() {
      speakText("Do you want to log in? Please say 'yes' to confirm.");
      startSpeechRecognition(null, true);
   }

   fields.forEach((fieldId, index) => {
      const fieldElement = document.getElementById(fieldId);
      fieldElement.addEventListener("click", () => {
         currentFieldIndex = index;
         const message = `Please say your ${fieldId}`;
         speakText(message);
         startSpeechRecognition(fieldId);
      });
   });
</script>

<script src="js/script.js"></script>

</body>
</html>
